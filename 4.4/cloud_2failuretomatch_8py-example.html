<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>51Degrees Device Detection Python: cloud/failuretomatch.py</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="examplegrabber.js"></script>
<script type="text/javascript" src="testedversionsgrabber.js"></script>
<script type="text/javascript" src="search51.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="docs-main.min.css" rel="stylesheet" type="text/css" />
</head>
<body class="l-docs-index p-doxygen">
<div class="l-index__content">
<!--div id="top"--><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" class="g-header g-header--docs">
  <h1 class="c-brand">
  <a id="projectlogo" href="../../documentation/4.4/index.html" class="c-brand__link"><img class="c-brand__image" alt="Logo" src="logo-51Degrees-Docs.png" style="width:172px;"/></a>
  <span class="c-tagline">51Degrees Device Detection Python
   &#160;<span id="projectnumber">4.4</span>
  </span>
  </h1>
  <div id="projectalign" style="padding-left: 0.5em;">
   <div id="projectbrief">Device Detection services for 51Degrees Pipeline</div>
  </div>
  <div id="main-nav"></div>
  <section class="g-search">
    <div class="c-search is-openable" id="searchOpenable">
    <form class="c-search__form">
      <div class="b-form-group b-form-group--with-icon">
        <label for="inputSearch" class="b-text--hidden">Search</label>
        <img src="icon-search.svg" class="b-icon" alt="Search" />
        <input type="text" class="c-search__input" id="inputSearch" onkeyup="javascript:onSearch(this,event.keyCode)" placeholder="Search" aria-label="Search">
      </div>
    </form>
    <div class="c-search__content" id="searchContent">
    </div>
  </div> 
  </section>
</div>
<!-- end header part -->
<main class="g-main">
<!-- Generated by Doxygen 1.8.15 -->
<!-- top -->
	<div class="g-docs__sidenav">																														         <nav id="nav-tree-contents" class="c-sidenav">																														     <h4 class="c-sidenav__heading">Documentation</h4>																									         <div id="nav-sync" class="sync"></div>
  <ul class="c-sidenav__list">																														     </ul>																																				   </nav>    </div><script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('cloud_2failuretomatch_8py-example.html','');});
/* @license-end */
</script>
<div id="doc-content" class="g-docs__content">
<div class="g-docs__header">
<h2 class="g-docs__page-title">cloud/failuretomatch.py</h2></div><!--header-->
<div class="g-docs__inner">
<div class="g-docs__primary" id="primary">
<p>
<p>
This example shows how the 51Degrees device detection engine deals with 
evidence that does not match any known device. 
In this scenario, 'HasValue' can be used to check if the property has been 
populated by the engine. If it hasn't then 'NoValueMessage' can be used 
to get the reason why.
</p>
</p>
<p>
<p>
To run this example, you will need to create a <strong>resource key</strong>. 
The resource key is used as shorthand to store the particular set of 
properties you are interested in as well as any associated license keys 
that entitle you to increased request limits and/or paid-for properties.
</p>
<p>
You can create a resource key using the 51Degrees 
<a href="https://configure.51degrees.com">Configurator</a>.
</p>
</p>
<p>Expected output:</p>
<div class="c-code__block c-code__block--outline"><div class="c-code__line"><a name="l00001"></a><span class="lineno">    1</span>&#160;Is user agent <span class="c-code__stringliteral">&#39;--&#39;</span> a mobile?</div><div class="c-code__line"><a name="l00002"></a><span class="lineno">    2</span>&#160;The results contained a null profile <span class="c-code__keywordflow">for</span> the component which the required property belongs to.</div><div class="c-code__line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div><div class="c-code__line"><a name="l00004"></a><span class="lineno">    4</span>&#160;Is user agent <span class="c-code__stringliteral">&#39;Mozilla/5.0 (iPhone; CPU iPhone OS 11_2 like Mac OS X) AppleWebKit/604.4.7 (KHTML, like Gecko) Mobile/15C114&#39;</span> a mobile?</div><div class="c-code__line"><a name="l00005"></a><span class="lineno">    5</span>&#160;true</div></div><div class="c-code__block c-code__block--outline"><div class="c-code__line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="c-code__comment"># *********************************************************************</span></div><div class="c-code__line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="c-code__comment"># This Original Work is copyright of 51 Degrees Mobile Experts Limited.</span></div><div class="c-code__line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="c-code__comment"># Copyright 2022 51 Degrees Mobile Experts Limited, Davidson House,</span></div><div class="c-code__line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="c-code__comment"># Forbury Square, Reading, Berkshire, United Kingdom RG1 3EU.</span></div><div class="c-code__line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="c-code__comment">#</span></div><div class="c-code__line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="c-code__comment"># This Original Work is licensed under the European Union Public Licence</span></div><div class="c-code__line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="c-code__comment"># (EUPL) v.1.2 and is subject to its terms as set out below.</span></div><div class="c-code__line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="c-code__comment">#</span></div><div class="c-code__line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="c-code__comment"># If a copy of the EUPL was not distributed with this file, You can obtain</span></div><div class="c-code__line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="c-code__comment"># one at https://opensource.org/licenses/EUPL-1.2.</span></div><div class="c-code__line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="c-code__comment">#</span></div><div class="c-code__line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="c-code__comment"># The &#39;Compatible Licences&#39; set out in the Appendix to the EUPL (as may be</span></div><div class="c-code__line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="c-code__comment"># amended by the European Commission) shall be deemed incompatible for</span></div><div class="c-code__line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="c-code__comment"># the purposes of the Work and the provisions of the compatibility</span></div><div class="c-code__line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="c-code__comment"># clause in Article 5 of the EUPL shall not apply.</span></div><div class="c-code__line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="c-code__comment"># </span></div><div class="c-code__line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="c-code__comment"># If using the Work as, or as part of, a network application, by </span></div><div class="c-code__line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="c-code__comment"># including the attribution notice(s) required under Article 5 of the EUPL</span></div><div class="c-code__line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="c-code__comment"># in the end user terms of the application under an appropriate heading, </span></div><div class="c-code__line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="c-code__comment"># such notice(s) shall fulfill the requirements of that article.</span></div><div class="c-code__line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="c-code__comment"># ********************************************************************* </span></div><div class="c-code__line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="c-code__line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div><div class="c-code__line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="c-code__line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="c-code__keyword">from</span> fiftyone_devicedetection_cloud.devicedetection_cloud_pipelinebuilder <span class="c-code__keyword">import</span> DeviceDetectionCloudPipelineBuilder</div><div class="c-code__line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="c-code__line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="c-code__comment"># First create the device detection pipeline with the desired settings.</span></div><div class="c-code__line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="c-code__line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="c-code__comment"># You need to create a resource key at https://configure.51degrees.com</span></div><div class="c-code__line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="c-code__comment"># and paste it into the code, replacing !!YOUR_RESOURCE_KEY!! below.</span></div><div class="c-code__line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="c-code__comment"># Alternatively, add a resource_key environment variable</span></div><div class="c-code__line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="c-code__keyword">import</span> os</div><div class="c-code__line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="c-code__keywordflow">if</span> <span class="c-code__stringliteral">&quot;resource_key&quot;</span> <span class="c-code__keywordflow">in</span> os.environ:</div><div class="c-code__line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    resource_key = os.environ[<span class="c-code__stringliteral">&quot;resource_key&quot;</span>]</div><div class="c-code__line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="c-code__keywordflow">else</span>:</div><div class="c-code__line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    resource_key = <span class="c-code__stringliteral">&quot;!!YOUR_RESOURCE_KEY!!&quot;</span></div><div class="c-code__line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div><div class="c-code__line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="c-code__keywordflow">if</span> resource_key == <span class="c-code__stringliteral">&quot;!!YOUR_RESOURCE_KEY!!&quot;</span>:</div><div class="c-code__line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    print(<span class="c-code__stringliteral">&quot;&quot;&quot;</span></div><div class="c-code__line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="c-code__stringliteral">    You need to create a resource key at</span></div><div class="c-code__line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="c-code__stringliteral">    https://configure.51degrees.com and paste it into the code,</span></div><div class="c-code__line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="c-code__stringliteral">    &#39;replacing !!YOUR_RESOURCE_KEY!!</span></div><div class="c-code__line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="c-code__stringliteral">    To include the properties used in this example, go to https://configure.51degrees.com/bxXqZhLT</span></div><div class="c-code__line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="c-code__stringliteral">    &quot;&quot;&quot;</span>)</div><div class="c-code__line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="c-code__keywordflow">else</span>:</div><div class="c-code__line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="c-code__line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    pipeline = DeviceDetectionCloudPipelineBuilder({</div><div class="c-code__line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        <span class="c-code__stringliteral">&quot;resource_key&quot;</span>: resource_key</div><div class="c-code__line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    }).build()</div><div class="c-code__line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="c-code__line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="c-code__comment"># We create a FlowData object from the pipeline</span></div><div class="c-code__line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="c-code__comment"># this is used to add evidence to and then process</span></div><div class="c-code__line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div><div class="c-code__line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    flowdata1 = pipeline.create_flowdata()</div><div class="c-code__line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="c-code__line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="c-code__comment"># Here we add a User-Agent of an iphone as evidence</span></div><div class="c-code__line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="c-code__line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    iphone_ua = <span class="c-code__stringliteral">&quot;Mozilla/5.0 (iPhone; CPU iPhone OS 11_2 like Mac OS X) AppleWebKit/604.4.7 (KHTML, like Gecko) Mobile/15C114&quot;</span></div><div class="c-code__line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    </div><div class="c-code__line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    flowdata1.evidence.add(<span class="c-code__stringliteral">&quot;header.user-agent&quot;</span>, iphone_ua)</div><div class="c-code__line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="c-code__line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="c-code__comment"># Now we process the FlowData</span></div><div class="c-code__line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="c-code__line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    flowdata1.process()</div><div class="c-code__line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="c-code__line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="c-code__comment"># To check whether the User-Agent is a mobile device we look at the ismobile property</span></div><div class="c-code__line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="c-code__comment"># inside the Device Detection Engine</span></div><div class="c-code__line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="c-code__line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="c-code__comment"># first we check if this has a meaningful result</span></div><div class="c-code__line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="c-code__line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    print(<span class="c-code__stringliteral">&quot;Is User-Agent &quot;</span> + iphone_ua + <span class="c-code__stringliteral">&quot; a mobile device?: &quot;</span>) </div><div class="c-code__line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="c-code__keywordflow">if</span> flowdata1.device.ismobile.has_value():</div><div class="c-code__line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        print(flowdata1.device.ismobile.value())</div><div class="c-code__line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="c-code__keywordflow">else</span>:</div><div class="c-code__line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <span class="c-code__comment"># Output why the value isn&#39;t meaningful</span></div><div class="c-code__line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        print(flowdata1.device.ismobile.no_value_message())</div><div class="c-code__line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="c-code__line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="c-code__comment"># Now we do the same with a new User-Agent, this time a corrupted one</span></div><div class="c-code__line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="c-code__line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    badUA = <span class="c-code__stringliteral">&quot;--&quot;</span></div><div class="c-code__line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    </div><div class="c-code__line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    flowdata2 = pipeline.create_flowdata()</div><div class="c-code__line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="c-code__line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    flowdata2.evidence.add(<span class="c-code__stringliteral">&quot;header.user-agent&quot;</span>, badUA)</div><div class="c-code__line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="c-code__line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    flowdata2.process()</div><div class="c-code__line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="c-code__line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    print(<span class="c-code__stringliteral">&quot;Is User-Agent &quot;</span> + badUA + <span class="c-code__stringliteral">&quot; a mobile device?: &quot;</span>) </div><div class="c-code__line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="c-code__keywordflow">if</span> flowdata2.device.ismobile.has_value():</div><div class="c-code__line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        print(flowdata2.device.ismobile.value())</div><div class="c-code__line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="c-code__keywordflow">else</span>:</div><div class="c-code__line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <span class="c-code__comment"># Output why the value isn&#39;t meaningful</span></div><div class="c-code__line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        print(flowdata2.device.ismobile.no_value_message())</div></div> </div><!-- primary -->
</div><!-- inner-->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<section id="nav-path" class="g-footer g-footer--docs"><!-- id is needed for treeview function! -->
    <p class="g-footer__copyright">Generated by
    <a href="http://www.doxygen.org/index.html">
    <b>doxygen</b></a> 1.8.15
  </p>
</section>
</div>
</main>
</div>
</body>
</html>
